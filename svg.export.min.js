// svg.export.js 0.1.1 - Copyright (c) 2014 Wout Fierens - Licensed under the MIT license
(function(){SVG.extend(SVG.Element,{exportSvg:function(i,n){var s,r,h,o,a,f,c=this.node.nodeName,d="";i=i||{};if(i.exclude==null||!i.exclude.call(this)){i=i||{};n=n||0;if(this instanceof SVG.Doc){d+=t('<?xml version="1.0" encoding="UTF-8"?>',i.whitespace,n);h=this.attr("width");o=this.attr("height");if(i.width)this.attr("width",i.width);if(i.height)this.attr("height",i.height)}d+=t("<"+c+this.attrToString()+">",i.whitespace,n,this instanceof SVG.TSpan);if(this instanceof SVG.Doc){this.attr({width:h,height:o});var l=i.description;if(l==null){l="Created with svg.js [http://svgjs.com]"}d+=t("<desc>"+e(l)+"</desc>",i.whitespace,n+1);d+=this.defs().exportSvg(i,n+1)}if(this instanceof SVG.Parent){for(s=0,r=this.children().length;s<r;s++){if(SVG.Absorbee&&this.children()[s]instanceof SVG.Absorbee){f=this.children()[s].node.cloneNode(true);a=document.createElement("div");a.appendChild(f);d+=a.innerHTML}else{d+=this.children()[s].exportSvg(i,n+1)}}}else if(this instanceof SVG.Text||this instanceof SVG.TSpan||this instanceof SVG.TextPath){for(s=0,r=this.node.childNodes.length;s<r;s++){if(this.node.childNodes[s].instance instanceof SVG.TSpan)d+=this.node.childNodes[s].instance.exportSvg(i,n+1);else if(this.node.childNodes[s].instance instanceof SVG.TextPath)d+=this.node.childNodes[s].instance.exportSvg(i,n+1);else d+=e(this.node.firstChild.nodeValue)}}else if(SVG.ComponentTransferEffect&&this instanceof SVG.ComponentTransferEffect){this.rgb.each(function(){d+=this.exportSvg(i,n+1)})}d+=t("</"+c+">",i.whitespace&&!(this instanceof SVG.TSpan),n);if(this instanceof SVG.TSpan){d+="\n"}}return d},exportAttr:function(t){if(arguments.length==0)return this.data("svg-export-attr");return this.data("svg-export-attr",t)},attrToString:function(){var t,e,i,n=[],s=this.exportAttr(),r=this.attr();if(typeof s=="object")for(e in s)if(e!="data-svg-export-attr")r[e]=s[e];for(e in r){i=r[e];if(e=="xlink"){e="xmlns:xlink"}else if(e=="href"){if(!r["xlink:href"])e="xlink:href"}if(typeof i==="string")i=i.replace(/"/g,"'");if(e!="data-svg-export-attr"&&e!="href"){if(e!="stroke"||parseFloat(r["stroke-width"])>0)n.push(e+'="'+i+'"')}}return n.length?" "+n.join(" "):""}});function t(t,e,n,s){if(e){var r="",h=e===true?"  ":e||"";for(i=n-1;i>=0;i--)r+=h;t=r+t+(s==true?"":"\n")}return t}function e(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}}).call(this);